{"level":"info","ts":1759912893.4409049,"caller":"logger/logger.go:85","msg":"Starting audit service","version":"1.0.0"}
{"level":"info","ts":1759912952.323709,"caller":"logger/logger.go:85","msg":"Starting audit service","version":"1.0.0"}
{"level":"info","ts":1759912952.345118,"caller":"logger/logger.go:85","msg":"Database connected successfully"}
{"level":"info","ts":1759912952.3451781,"caller":"logger/logger.go:85","msg":"Database models initialized successfully"}
{"level":"info","ts":1759912952.377839,"caller":"logger/logger.go:85","msg":"Redis connected successfully"}
{"level":"info","ts":1759912952.378718,"caller":"logger/logger.go:85","msg":"Audit service registered"}
{"level":"info","ts":1759912973.620008,"caller":"logger/logger.go:85","msg":"Starting audit service","version":"1.0.0"}
{"level":"info","ts":1759912973.6312242,"caller":"logger/logger.go:85","msg":"Database connected successfully"}
{"level":"info","ts":1759912973.631285,"caller":"logger/logger.go:85","msg":"Database models initialized successfully"}
{"level":"info","ts":1759912973.633069,"caller":"logger/logger.go:85","msg":"Redis connected successfully"}
{"level":"info","ts":1759912973.634067,"caller":"logger/logger.go:85","msg":"Audit service registered"}
{"level":"info","ts":1759912973.634294,"caller":"logger/logger.go:85","msg":"gRPC server starting","address":"0.0.0.0:50053"}
{"level":"info","ts":1759912974.189284,"caller":"logger/logger.go:85","msg":"Service registered to etcd","address":"0.0.0.0:50053"}
{"level":"info","ts":1759935067.84045,"caller":"logger/logger.go:85","msg":"gRPC request started","method":"/audit.v1.AuditService/SubmitContent","request":"content_id:\"live_stream_1759935067\" content_type:CONTENT_TYPE_LIVE metadata:{key:\"create_time\" value:\"2025-10-08T22:51:07+08:00\"} metadata:{key:\"title\" value:\"33333333\"}"}
{"level":"info","ts":1759935067.844357,"caller":"logger/logger.go:85","msg":"Submitting content for audit","content_id":"live_stream_1759935067","content_type":"\u0006"}
{"level":"error","ts":1759935067.976774,"caller":"logger/logger.go:95","msg":"Failed to submit content for audit","error":"failed to check whitelist: failed to check whitelist: Error 1146 (42S02): Table 'videoworld.audit_whitelists' doesn't exist","stacktrace":"audit_service/pkg/logger.(*zapLogger).Error\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/pkg/logger/logger.go:95\naudit_service/internal/handler.(*AuditServiceHandler).SubmitContent\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/internal/handler/audit_handler.go:55\naudit_service/proto_gen/audit/v1._AuditService_SubmitContent_Handler.func1\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/proto_gen/audit/v1/audit_grpc.pb.go:279\nmain.main.unaryInterceptor.func8\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/cmd/server/main.go:157\naudit_service/proto_gen/audit/v1._AuditService_SubmitContent_Handler\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/proto_gen/audit/v1/audit_grpc.pb.go:281\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/Users/kanyu/Desktop/goproject/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1431\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/Users/kanyu/Desktop/goproject/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1842\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1\n\t/Users/kanyu/Desktop/goproject/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1061"}
{"level":"error","ts":1759935067.9787781,"caller":"logger/logger.go:95","msg":"gRPC request failed","method":"/audit.v1.AuditService/SubmitContent","error":"rpc error: code = Internal desc = failed to submit content for audit","duration":0.138757139,"stacktrace":"audit_service/pkg/logger.(*zapLogger).Error\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/pkg/logger/logger.go:95\nmain.main.unaryInterceptor.func8\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/cmd/server/main.go:162\naudit_service/proto_gen/audit/v1._AuditService_SubmitContent_Handler\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/proto_gen/audit/v1/audit_grpc.pb.go:281\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/Users/kanyu/Desktop/goproject/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1431\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/Users/kanyu/Desktop/goproject/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1842\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1\n\t/Users/kanyu/Desktop/goproject/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1061"}
{"level":"info","ts":1759936009.4521,"caller":"logger/logger.go:85","msg":"Shutting down server..."}
{"level":"info","ts":1759936009.4549592,"caller":"logger/logger.go:85","msg":"Server stopped gracefully"}
{"level":"info","ts":1759936220.687238,"caller":"logger/logger.go:85","msg":"Starting audit service","version":"1.0.0"}
{"level":"info","ts":1759936220.719794,"caller":"logger/logger.go:85","msg":"Database connected successfully"}
{"level":"info","ts":1759936220.7198641,"caller":"logger/logger.go:85","msg":"Database models initialized successfully"}
{"level":"info","ts":1759936220.7240472,"caller":"logger/logger.go:85","msg":"Redis connected successfully"}
{"level":"info","ts":1759936220.7250519,"caller":"logger/logger.go:85","msg":"Audit service registered"}
{"level":"info","ts":1759936220.725312,"caller":"logger/logger.go:85","msg":"gRPC server starting","address":"0.0.0.0:50053"}
{"level":"info","ts":1759936220.857271,"caller":"logger/logger.go:85","msg":"Service registered to etcd","address":"0.0.0.0:50053"}
{"level":"info","ts":1759936228.404363,"caller":"logger/logger.go:85","msg":"gRPC request started","method":"/audit.v1.AuditService/SubmitContent","request":"content_id:\"live_stream_1759936228\"  content_type:CONTENT_TYPE_LIVE  metadata:{key:\"create_time\"  value:\"2025-10-08T23:10:28+08:00\"}  metadata:{key:\"title\"  value:\"33333333\"}"}
{"level":"info","ts":1759936228.405199,"caller":"logger/logger.go:85","msg":"Submitting content for audit","content_id":"live_stream_1759936228","content_type":"\u0006"}
{"level":"error","ts":1759936228.435209,"caller":"logger/logger.go:95","msg":"Failed to submit content for audit","error":"failed to check whitelist: failed to check whitelist: Error 1146 (42S02): Table 'videoworld.audit_whitelists' doesn't exist","stacktrace":"audit_service/pkg/logger.(*zapLogger).Error\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/pkg/logger/logger.go:95\naudit_service/internal/handler.(*AuditServiceHandler).SubmitContent\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/internal/handler/audit_handler.go:56\naudit_service/proto_gen/audit/v1._AuditService_SubmitContent_Handler.func1\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/proto_gen/audit/v1/audit_grpc.pb.go:279\nmain.main.unaryInterceptor.func8\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/cmd/server/main.go:157\naudit_service/proto_gen/audit/v1._AuditService_SubmitContent_Handler\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/proto_gen/audit/v1/audit_grpc.pb.go:281\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/Users/kanyu/Desktop/goproject/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1431\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/Users/kanyu/Desktop/goproject/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1842\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1\n\t/Users/kanyu/Desktop/goproject/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1061"}
{"level":"error","ts":1759936228.435497,"caller":"logger/logger.go:95","msg":"gRPC request failed","method":"/audit.v1.AuditService/SubmitContent","error":"rpc error: code = Internal desc = failed to submit content for audit","duration":0.031133057,"stacktrace":"audit_service/pkg/logger.(*zapLogger).Error\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/pkg/logger/logger.go:95\nmain.main.unaryInterceptor.func8\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/cmd/server/main.go:162\naudit_service/proto_gen/audit/v1._AuditService_SubmitContent_Handler\n\t/Users/kanyu/Desktop/project/kanyu_server/new_project/project/vision_world_back/service/audit_service/proto_gen/audit/v1/audit_grpc.pb.go:281\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/Users/kanyu/Desktop/goproject/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1431\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/Users/kanyu/Desktop/goproject/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1842\ngoogle.golang.org/grpc.(*Server).serveStreams.func2.1\n\t/Users/kanyu/Desktop/goproject/pkg/mod/google.golang.org/grpc@v1.75.1/server.go:1061"}
